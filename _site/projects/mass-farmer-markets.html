<!DOCTYPE html>

<!--
  portfolYOU Jekyll theme by Youssef Raafat
  Free for personal and commercial use under the MIT license
  https://github.com/YoussefRaafatNasry/portfolYOU
-->

<html lang="en" class="h-100">

<head>

  
  
  

  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:type" content="website">
  <meta property="og:title" content="Farmer&#39;s Markets">
  <meta property="og:description" content="Visualization of Farmer's Markets within Massachusetts">
  <meta property="og:image" content="assets/pngs/nyc_covid.png">

  <title>Farmer&#39;s Markets</title>
  <meta name="description" content="Visualization of Farmer's Markets within Massachusetts">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico">

  <!-- Theme style -->
  <script src="/assets/js/theme.js"></script>

  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.10.0/css/all.css">

  <!-- Bootstrap CSS CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">

  <!-- Animate CSS CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/assets/css/style.css">

</head>

<body class="h-100 d-flex flex-column">

  <main class="flex-shrink-0 container mt-5">
    <nav class="navbar navbar-expand-lg navbar-themed">

  <a class="navbar-brand" href="/"><h5><b>Dylan Han</b></h5></a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fas fa-1x fa-bars text-themed"></i>
  </button>

  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav ml-auto"><a class="nav-item nav-link active" href="/projects/">Visualizations</a>

      <a class="nav-item nav-link " href="/blog/">Blog</a>

      <a class="nav-item nav-link " href="/about/">About</a>

      

      <span id="theme-toggler" class="nav-item nav-link" role="button" onclick="toggleTheme()"></span>
    </div>
  </div>

</nav>
    <div class="col-lg-10 mx-auto mt-5 markdown-body">
  <p>Farmer’s Markets</p>

<h2 id="some-quick-visualizations">Some Quick Visualizations</h2>

<p>Growing up in a small town surrounded by farms and field crops, the running joke at the high school was that we had more cows than students (probably not true but it’s pretty close!). Supporting locally grown produce was always a big thing in our area. Curious to see where else in the state I could look for more fresh vegetables, here are the results of my search.</p>

<vegachart schema-url="/assets/json/layered_chart.json" style="width: 100%"></vegachart>

<p>Each dot on the chart represents one farmer market location and hovering over a dot will show the location and town along with a website if available. There is also the dropdown menu at the bottom which has towns sorted alphabetically. If your town does not appear on the list, it likely does not have its own farmer’s market. A very unfortunate result, but there are  over 300 markets spread around the state. Surely one of them is close by enough to visit!</p>

<p>One critique about this map I’ve made is that there is no function to zoom in/out. Unlike other altair maps, this one is built with geodata involved and is still a work-in-progress with limited features. The background projection of Massachusetts is also one I made myself as the current libraries only support all of United States which makes our region of interest too small to really make much sense of, especially without a zoom in feature available.</p>

<p><img src="https://raw.githubusercontent.com/drinkingtea2223/drinkingtea2223.github.io/main/assets/pngs/big_awkward_fm.png" alt="large-map" /></p>

<p>I had originally made the graph with ipywidgets and contextily but unfortunately it is impossible to transport the widget and maintain its interactivity.</p>

<p><img src="https://raw.githubusercontent.com/drinkingtea2223/drinkingtea2223.github.io/main/assets/pngs/fm_mass_ctx.png" alt="ctx-map" /></p>

<p>For individuals interested in seeing this particular rendering with a more realistic map background, please try out the code below in a jupyter notebook or some other python setting.</p>

<p>’’’
  import numpy as np
  import pandas as pd
  import matplotlib.pyplot as plt
  import geopandas 
  import ipywidgets
  import contextily as ctx</p>

<p>mass = geopandas.read_file(“https://arcgisserver.digital.mass.gov/arcgisserver/rest/services/AGOL/Massachusetts_Counties/MapServer/0/query?outFields=<em>&amp;where=1%3D1&amp;f=geojson”)
  markets = geopandas.read_file(“https://arcgisserver.digital.mass.gov/arcgisserver/rest/services/DPH/DPH_Farmers_Markets/MapServer/0/query?outFields=</em>&amp;where=1%3D1&amp;f=geojson”)</p>

<p>markets_subset = markets.loc[markets[“TYPE”]!=”Farmers Markets”]</p>

<p>@ipywidgets.interact(btype=sorted(set(markets[‘TOWN’].unique())))</p>

<p>def interact_plot(btype):
      markets_subset = markets.loc[markets[“TOWN”]==btype]
      fig, ax = plt.subplots(1, 1, figsize=(10,10))</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  mass.plot(ax=ax, alpha=0.5, edgecolor='k')
  markets_subset.plot(column="TOWN", ax=ax, cmap='rainbow', categorical=True, legend=True)
  
  ctx.add_basemap(ax=ax, crs=markets.crs.to_string())

  plt.show()
</code></pre></div></div>

<p>’’’</p>

<p>The data regarding farmer’s markets is taken from https://hub.arcgis.com/ with a huge thanks to https://github.com/johan/world.geo.json for providing geojson data for my altair base projection.</p>


</div>
  </main>
  <footer class="mt-auto py-3 text-center">

  <small class="text-muted mb-2">
    <i class="fas fa-code"></i> with <i class="fas fa-heart"></i>
    by <strong>Dylan Han</strong>
  </small>

  <div class="container-fluid justify-content-center"><a class="social mx-1"  href="mailto:dhan78557@gmail.com"
       style="color: #6c757d"
       onMouseOver="this.style.color='#db4437'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fas fa-envelope fa-1x"></i>
    </a><a class="social mx-1"  href="https://www.github.com/drinkingtea2223"
       style="color: #6c757d"
       onMouseOver="this.style.color='#333333'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fab fa-github fa-1x"></i>
    </a>

</div><small id="attribution">
    theme <a href="https://github.com/YoussefRaafatNasry/portfolYOU">portfolYOU</a>
  </small>

</footer>


<!-- Custom page specific js files -->
  
    <script src='/assets/js/vega.min.js' type="text/javascript"></script>
  
    <script src='/assets/js/vega-lite.min.js' type="text/javascript"></script>
  
    <script src='/assets/js/vega-embed.min.js' type="text/javascript"></script>
  
    <script src='/assets/js/justcharts.js' type="text/javascript"></script>
  



  
  <!-- GitHub Buttons -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

<!-- jQuery CDN -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Popper.js CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>

<!-- Bootstrap JS CDN -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!-- wow.js CDN & Activation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.js"></script>
<script> new WOW().init(); </script>

<!-- Initialize all tooltips -->
<script>
$(function () {
    $('[data-toggle="tooltip"]').tooltip()
})
</script>
</body>

</html>